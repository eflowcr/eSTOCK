<!-- Main container with inventory styling -->
<div class="bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 mt-6">

<!-- Loading State -->
<div *ngIf="isLoading" class="loading-container">
  <div class="loading-spinner"></div>
</div>

<!-- Empty State -->
<div *ngIf="!isLoading && adjustments.length === 0" class="empty-state">
  <svg class="empty-state-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
    </path>
  </svg>
  <h3 class="empty-state-title">{{ t('no_adjustments_found') }}</h3>
  <p class="empty-state-description">{{ t('no_adjustments_description') }}</p>
</div>

<!-- Content -->
<div *ngIf="!isLoading && adjustments.length > 0">
  <!-- Search and Controls -->
  <div class="search-container">
  <!-- Filters -->
  <div class="mb-6">
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
      <!-- Search -->
      <div class="sm:col-span-2">
        <input type="text" [(ngModel)]="searchTerm" (input)="onSearch()"
          placeholder="{{ t('search_sku_location_notes') }}"
          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#3e66ea] focus:border-[#3e66ea] text-[#00113f] dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400">
      </div>

      <!-- Reason Filter -->
      <div>
        <select [(ngModel)]="reasonFilter" (change)="onSearch()"
          class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#3e66ea] focus:border-[#3e66ea] text-[#00113f] dark:bg-gray-700 dark:border-gray-600 dark:text-white">
          <option value="">{{ t('all_reasons') }}</option>
          <option value="damaged">{{ t('damaged') }}</option>
          <option value="lost">{{ t('lost') }}</option>
          <option value="found">{{ t('found') }}</option>
          <option value="cycle_count_correction">{{ t('cycle_count_correction') }}</option>
          <option value="other">{{ t('other') }}</option>
        </select>
      </div>
    </div>
  </div>
  </div>

  <!-- Table -->
  <div class="table-scroll-container overflow-x-auto" (scroll)="onTableScroll($event)">
    <ng-container *ngIf="filteredAdjustments.length > 0; else noDataTemplate">
    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 inventory-table-fixed">
      <thead class="bg-gray-50 dark:bg-gray-700">
        <tr>
          <th (click)="sort('createdAt')" 
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
            <div class="flex items-center">
              {{ t('date') }}
              <svg *ngIf="sortBy === 'createdAt'" class="ml-1 h-4 w-4"
                [class.transform]="sortOrder === 'desc'" [class.rotate-180]="sortOrder === 'desc'"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
              </svg>
            </div>
          </th>
          <th (click)="sort('sku')" 
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
            <div class="flex items-center">
              {{ t('sku_code') }}
              <svg *ngIf="sortBy === 'sku'" class="ml-1 h-4 w-4"
                [class.transform]="sortOrder === 'desc'" [class.rotate-180]="sortOrder === 'desc'"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
              </svg>
            </div>
          </th>
          <th (click)="sort('location')" 
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
            <div class="flex items-center">
              {{ t('location') }}
              <svg *ngIf="sortBy === 'location'" class="ml-1 h-4 w-4"
                [class.transform]="sortOrder === 'desc'" [class.rotate-180]="sortOrder === 'desc'"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
              </svg>
            </div>
          </th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
            {{ t('previous_qty') }}
          </th>
          <th (click)="sort('adjustmentQuantity')" 
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
            <div class="flex items-center">
              {{ t('adjustment') }}
              <svg *ngIf="sortBy === 'adjustmentQuantity'" class="ml-1 h-4 w-4"
                [class.transform]="sortOrder === 'desc'" [class.rotate-180]="sortOrder === 'desc'"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
              </svg>
            </div>
          </th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
            {{ t('new_qty') }}
          </th>
          <th (click)="sort('reason')" 
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
            <div class="flex items-center">
              {{ t('reason') }}
              <svg *ngIf="sortBy === 'reason'" class="ml-1 h-4 w-4"
                [class.transform]="sortOrder === 'desc'" [class.rotate-180]="sortOrder === 'desc'"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
              </svg>
            </div>
          </th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
            {{ t('user') }}
          </th>
          <!-- Actions column - commented out -->
          <!-- <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
            {{ t('actions') }}
          </th> -->
        </tr>
      </thead>
      <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
        <tr *ngFor="let adjustment of visibleAdjustments" class="hover:bg-gray-50 dark:hover:bg-gray-700">
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ formatDate(adjustment.created_at) }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100">
            {{ adjustment.sku }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ adjustment.location }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ adjustment.previous_quantity || 0 }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            <span [class]="getAdjustmentBadgeClass(adjustment.adjustment_quantity || 0)">
              {{ adjustment.adjustment_quantity >= 0 ? '+' : '' }}{{ adjustment.adjustment_quantity || 0 }}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ adjustment.new_quantity || 0 }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ t(adjustment.reason) }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ getUserDisplay(adjustment.user_id) }}
          </td>
          <!-- Actions column - commented out -->
          <!-- <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
            <button (click)="viewAdjustmentDetails(adjustment)"
              class="text-[#3e66ea] hover:text-[#4465ec] focus:outline-none focus:underline">
              <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
              </svg>
            </button>
          </td> -->
        </tr>
      </tbody>
    </table>
    </ng-container>
    <ng-template #noDataTemplate>
      <div class="p-6 text-center text-sm text-gray-600 dark:text-gray-300">{{ t('no_data') }}</div>
    </ng-template>
  </div>

</div>

</div>